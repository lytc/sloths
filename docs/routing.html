<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>
        Lazy Framework - - Routing    </title>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="/sloths/assets/vendor/codemirror/4.1/lib/codemirror.css" rel="stylesheet">
    <link href="/sloths/assets/vendor/codemirror/4.1/theme/mdn-like.css" rel="stylesheet">
    <link href="/sloths/assets/stylesheets/application.css?__dc" rel="stylesheet">    </head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/sloths/index.html">Lazy Framework</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/sloths/docs/installation.html">Documentation</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <br>
            <br>
            <ul class="nav">
                <li>
                    <a href="#"><b>Getting Started</b></a>
                    <ul>
                        <li><a href="/sloths/docs/installation.html">Installation</a></li>
                        <li><a href="/sloths/docs/system-requirements.html">System Requirements</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><b>Application</b></a>
                    <ul>
                        <li><a href="/sloths/docs/application-structure.html">Application Structure</a></li>
                        <li><a href="/sloths/docs/server-configuration.html">Server Configuration</a></li>
                        <li><a href="/sloths/docs/routing.html">Routing</a></li>
                        <li><a href="/sloths/docs/request.html">Request</a></li>
                        <li><a href="/sloths/docs/response.html">Response</a></li>
                        <li><a href="#">View</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><b>Database</b></a>
                    <ul>
                        <li><a href="/sloths/docs/databases/connection.html">Connection</a></li>
                        <li><a href="/sloths/docs/databases/query-builder.html">Query Builder</a></li>
                    </ul>
                </li>
                <li>
                    <a href="/sloths/docs/orm/define-model.html"><b>ORM</b></a>
                    <ul>
                        <li><a href="/sloths/docs/orm/define-model.html">Defining Models</a></li>
                        <li>
                            <a href="/sloths/docs/orm/model-overview.html">Model Interaction</a>
                            <ul>
                                <li><a href="/sloths/docs/orm/model-overview.html">Overview</a></li>
                                <li><a href="/sloths/docs/orm/model.html">Model</a></li>
                                <li><a href="/sloths/docs/orm/collection.html">Collection</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="/sloths/docs/orm/relationship-overview.html">Relationship</a>
                            <ul>
                                <li><a href="/sloths/docs/orm/relationship-overview.html">Overview</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-one.html">Has One</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-many.html">Has Many</a></li>
                                <li><a href="/sloths/docs/orm/relationship-belongs-to.html">Belongs To</a></li>
                                <li><a href="/sloths/docs/orm/relationship-has-many-through.html">Has Many Through</a></li>
                            </ul>
                        </li>

                    </ul>
                </li>
                <li>
                    <a href="#"><b>Development Tools</b></a>
                    <ul>
                        <li><a href="#">Console</a></li>
                        <li><a href="#">Model Generator</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="col-md-9">
            <div class="page-header">
    <h1>Routing</h1>
</div>

<blockquote>
    <p>Lazy Routes learned from <a href="http://www.sinatrarb.com/intro.html#Routes">Sinatra Routes</a>!</p>
</blockquote>

<div class="alert alert-info">
    The context of route callback handler is the called. Commonly, it is the <code>\Sloths\Application\Application</code>.
    So every properties, methods of the context is available within the callback handler.
</div>

<p>
    Routes are matched in the order they are defined.
    The first route that matches the request is invoked
    unless you call <a href="/docs/application#pass"><code>pass()</code></a> within the route callback, the process will be matching the next route.
</p>

<p>Route patterns can be static pattern:</p>
<textarea class="code">
    $this->get('/foo', function() {
        # matches "GET /foo" but not "GET /bar"
    });
</textarea>
<br>

<p>Or includes named parameters:</p>
<textarea class="code">
    $this->get('/hello/:name', function($name) {
        # matches "GET /hello/foo" and "GET /hello/bar"
        # $name is 'foo' or 'bar'
    });
</textarea>
<br>

<p>Or named parameters with double colon:</p>
<div><em>Named parameters with double colon only matches the numeric value.</em></div>
<textarea class="code">
    $this->get('/posts/::id', function($id) {
        # matches "GET /posts/123"
        # $id is 123
    });
</textarea>
<br>

<p>Or Includes wildcard parameters:</p>
<textarea class="code">
    $this->get('/say/*/to/*', function($splat) {
        # matches "GET /say/hello/to/world"
        $splat # => ['hello', 'world']
    });

    $this->get('/download/*.*', function($splat) {
        # matches "GET /download/path/to/file.zip"
        $splat # => ['path/to/file', 'zip']
    });
</textarea>
<br>

<p>Or With Regular Expressions: <em>(Regex pattern should start with <code>#</code> character)</em></p>
<textarea class="code">
    $this->get('#/hello/(\w+)', function($name) {
        # matches "GET /hello/foo"
        # $name is 'foo'
    };
</textarea>
<br>

<p>Route patterns may have optional parameters:</p>
<textarea class="code">
    $this->get('/posts.?:format?', function($format) {
        # matches "GET /posts" and any extension "GET /posts.xml", "GET /posts.json" etc.
        # $format is "null" or "xml" or "json"
    });
</textarea>

<h4>Access to request parameters:</h4>
<textarea class="code">
    $this->get('/posts', function() {
        # matches "GET /posts?author=foo"
        $author = $this->params->author; # => "foo"
        $author = $this->param('author'); # => "foo"
    });
</textarea>

<h4>Return Values</h4>
<p>Most commonly, this is a string. But other values are also accepted.</p>
<p>
    The return values will be send to response body. It mean if return values is an array or object,
    the response object will be send it as json string and the content type header is <code>application/json</code>.
</p>
<textarea class="code">
    $this->get('/posts?.format?', function($format) {
        $posts = Post::all();

        if ('json' == $format) {
            return $posts;
        }

        return $this->render('/posts/list', ['posts' => $posts]);
    });
</textarea>

<h4>Simple CRUD Routes</h4>
<code>application\routes\posts.php</code>
<textarea class="code">
    # GET /posts
    $this->get('/', function() {
        $posts = Post::all();

        return $this->render('posts/list', [
            'posts' => $posts
        ]);
    });

    # GET /posts/123
    $this->get('/::id', function($id) {
        $post = Post::first($id);
        $post || $this->notFound();

        return $this->render('posts/view', [
            'post' => $post
        ]);
    });

    # GET /posts/new
    $this->get('/new', function() {
        return $this->render('posts/new');
    });

    # POST /posts
    $this->post('/', function() {
        $post = Post::create($this->post);
        $post->save();

        $this->redirectTo('/posts/' . $post->id);
    });

    # GET /posts/123/edit
    $this->get('/::id/edit', function($id) {
        //...
    });

    # PUT /posts/123
    $this->put('/::id', function($id) {
        $post = Post::first($id);
        $post || $this->notFound();

        $post->fromArray($this->post);
        $post->save();

        $this->redirectBack();
    });

    # DELETE /posts/123
    $this->delete('/::id', function($id) {
        $post = Post::first($id);
        $post || $this->notFound();

        $post->delete();
        $this->redirectTo('/posts');
    });
</textarea>        </div>
    </div>
</div>

<br>

<div class="container">
    <div class="row">
        <div class="col-md-9 col-md-offset-3">
            <hr>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'sloths-framework'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>

<hr>

<footer>
    <div class="container">
        <div>
            <div class="pull-left">
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=watch&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=fork&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=lytc&repo=sloths&type=follow&count=true"
                        allowtransparency="true" frameborder="0" scrolling="0" width="180" height="20"></iframe>
            </div>
        </div>
        <div class="pull-right">
            <ul class="list-inline">
                <li><a href="https://github.com/lytc/sloths">GitHub</a></li>
                <li><a href="/sloths/docs/installation.html">Documentation</a></li>
            </ul>
        </div>
    </div>
</footer>
<br>
<br>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script src="/sloths/assets/vendor/codemirror/4.1/lib/codemirror.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/lib/util/formatting.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/addon/edit/matchbrackets.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/htmlmixed/htmlmixed.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/javascript/javascript.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/css/css.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/clike/clike.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/php/php.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/nginx/nginx.js"></script>
<script src="/sloths/assets/vendor/codemirror/4.1/mode/sql/sql.js"></script>
<script src="/sloths/assets/javascripts/application.js?__dc"></script><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-50648420-1', 'lytc.github.io');
    ga('send', 'pageview');

</script>
</body>
</html>